NMAP для новых ньюфагов
====

Что это такое?
----
Nmap - это сканер портов, который позволяет исследовать сети, находить различные устройства в интернете и даже хацкать их.
Если вы решили заняться нетсталкингом, то эта программа вам будет просто необходима. Конечно, есть и другие сканеры портов, даже самописный можно использовать, однако nmap является самым известным, простым и гибким в настройке.
Скачать нмап без регистрации и SMS можно [здесь](http://nmap.org/download.html).

Как его использовать?
----
Это консольная программа со множестом полезных опций. Дополнительно, существует графическая оболочка Zenmap, которая работает с теми же опциями. 

Вы можете комбинировать опции nmap, например:
> nmap -T5 -A -Pn -iL targets.txt -oX result.xml

Некоторые опции требуют права суперюзера в linux или права администратора в винде. Если вы не знаете, как запускать консольные программы, то обязательно научитесь это делать, иначе какой же вы нетсталкер?

**В этом гайде описываются примеры опций nmap, которые полезны при занятиях нетсталкингом.**

Как просканировать один хост?
----
Сканирование ip адреса (указываем целью айпи 192.168.1.1)
> nmap 192.168.1.1
 
Сканирование домена
> nmap 2ch.hk
 
Сканирование домена с более подробной информацией
> nmap -v 2ch.hk

Как просканировать несколько хостов или подсетей?
----
> nmap 192.168.1.1 192.168.1.2 192.168.1.3

> nmap 192.168.1.1,2,3

> nmap 2ch.hk 127.0.0.1 www.google.com

Вы так же можете сканировать диапазон адресов
> nmap 192.168.1.1-20

> nmap 192.168.1.*

Сканирование целой подсети
> nmap 192.168.1.0/24

Как просканировать список IP, подсетей или доменов?
----
Сохраните все, что вы хотите просканировать в текстовый файл, каждая цель на новой строке. Затем, используйте опцию -iL <имя файла>

Например, создайте файл targets.txt:
> wikipedia.org

> google.com

> 8.8.8.0/24

> 127.0.0.1

И сканируйте такой коммандой:
> nmap -iL targets.txt

Как узнать основную доступную информацию об удаленном хосте?
----
Используйте опцию -A. 
> nmap -A -v nmap.org

Что делать, если хост закрыт фаерволлом или не отвечает на пинги?
----
Используйте опцию -Pn. Nmap не будет проверять пинги, а сразу начнет сканировать порты
> nmap -Pn nmap.org

Как определить, какие есть рабочие хосты в данной подсети?
----
Используйте ping сканирование
> nmap -sP 192.168.1.0/24

Как выполнить простое быстрое сканирование?
----
Просканировать топ 100 самых популярных портов:
> nmap -F 192.168.1.1

Топ 50 портов и т.д.:

> nmap --top-ports 50 192.168.1.1


Какой коммандой показывать только открытые порты?
----
> nmap --open 192.168.1.1

Как мне просканировать только определенные порты?
----
Для этого используйте опцию -p. Например:
> nmap -p 80 google.com

> nmap -p 22,80,443 2ch.hk

> nmap -p 10-30,6666-6700 irc.freenode.net

Сканирование всех портов:
> nmap -p "*" 192.168.1.1

Как максимально увеличить скорость сканирования?
----
Для этого используйте -T5. Эта опция выставит самые агрессивные настройки сканирования, но скорость будет гораздо выше.
> nmap -T5 192.168.1.0/24

Если вам не нужны имена хостов, то можно еще отключить запросы к DNS. Это тоже сильно увеличивает скорость сканирования:
> nmap -n 192.168.1.0/24

Самый долгий процесс при сканировании - определение версий приложений. Если задача определить версии не стоит - не пользуйтесь -sV.

Так же стоит отметить, что если вы сканируете большие диапазоны хостов на один определенный порт, то скорость можно значительно увеличить отключением Ping сканирования. Например:
> nmap -Pn -p 80 192.168.1.0/24

Как определить версию операционной системы на удаленном хосте?
----
Используйте -O. Эта опция пытается определить тип операционной системы по открытым портам.
> nmap -O -v irc.freenode.net

Как определить версии программ, которые слушают на открытых портах?
----
> nmap -sV google.com

Возможно ли скрыто просканировать хост?
----
Да, вы можете попробовать сканировать с помощью SYN STEALTH.
> nmap -sS google.com

Как сохранить результаты моего сканирования в файл?
----
Вы можете сохранить весь вывод программы в текстовый файл:
> nmap -oN output.txt 192.168.1.1

А так же можете сохранить отчет в xml, чтобы использовать его в других программах:
> nmap -oX output.xml 192.168.1.1

Или же сохранить вывод программы в трех доступных вариантах сразу:
> nmap -oA file 192.168.1.1

Что за скрипты есть в nmap? Как их использовать?
----
С программой nmap поставляется много интересных скриптов, которые расширяют ее функционал. Есть скрипты, которые детектируют уязвимости, подбирают пароли, выдают различную полезную инфу и т.д.

Например, скрипт, который проверяет FTP сервера на возможность залогиниться анонимно:
> nmap --script=ftp-anon nmap.org

Использование стандартного набора скриптов против цели производится опцией -sC. Этот режим называется сканирование скриптами и выводит много интересной информации:
> nmap -sC 2ch.hk

Посмотреть информацию о скрипте http-title
> nmap --script-help=http-title

Скрипты в nmap - мощное оружие в руках нетсталкера. Весь список скриптов находится [здесь](http://nmap.org/nsedoc/), и вы можете написать свой, если сильно захотите.

Могу ли я сканировать через прокси/tor?
----
Да, но это довольно проблематично. Необходимо правильно подбирать опции и таймауты. Если вы хотите полноценно сканировать большие диапазоны и при этом не светить свой IP, лучше воспользоваться VPN.

Есть ли у nmap графическая оболочка?
----
Да, есть несколько. Самая популярная и удобная - zenmap.

PS:
====
Этот гайд - всего лишь некоторые примеры использования nmap. Но даже этих опций может быть достаточно, чтобы обнаруживать вебкамеры, уязвимые сервера или секретные серверы ЦРУ.

Это вольный перевод статьи на английском языке, оригинал [тут](http://www.cyberciti.biz/networking/nmap-command-examples-tutorials/)
За дополнительной информацией вы можете обратиться в гугл или в мануал nmap. Успехов в сканировании!
